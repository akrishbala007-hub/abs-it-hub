(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,20383,e=>{"use strict";var r=e.i(43476),t=e.i(71645),a=e.i(18566);function s({initialData:e,onSuccess:s,onCancel:l}){let[i,o]=(0,t.useState)(e||{name:"",description:"",price:0,category:"laptop",image:""}),[n,d]=(0,t.useState)(!1),c=(0,a.useRouter)(),m=async r=>{r.preventDefault(),d(!0);let t=e?`/api/products/${e.id}`:"/api/products",a=e?"PUT":"POST";try{(await fetch(t,{method:a,headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})).ok?(s&&s(),c.refresh()):alert("Failed to save product")}catch(e){alert("Error saving product")}finally{d(!1)}};return(0,r.jsxs)("form",{onSubmit:m,className:"card",style:{padding:"1.5rem"},children:[(0,r.jsx)("h3",{style:{fontSize:"1.25rem",marginBottom:"1rem"},children:e?"Edit Product":"Add New Product"}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Name"}),(0,r.jsx)("input",{className:"form-input",required:!0,value:i.name,onChange:e=>o({...i,name:e.target.value})})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Category"}),(0,r.jsxs)("select",{className:"form-select",value:i.category,onChange:e=>o({...i,category:e.target.value}),children:[(0,r.jsx)("option",{value:"laptop",children:"Laptop"}),(0,r.jsx)("option",{value:"desktop",children:"Desktop"}),(0,r.jsx)("option",{value:"accessory",children:"Accessory"})]})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Price (₹)"}),(0,r.jsx)("input",{className:"form-input",type:"number",required:!0,value:i.price,onChange:e=>o({...i,price:Number(e.target.value)})})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Description"}),(0,r.jsx)("textarea",{className:"form-textarea",rows:4,value:i.description,onChange:e=>o({...i,description:e.target.value})})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Image URL"}),(0,r.jsx)("input",{className:"form-input",placeholder:"/images/example.jpg or https://...",value:i.image,onChange:e=>o({...i,image:e.target.value})}),(0,r.jsx)("div",{style:{fontSize:"0.8rem",color:"#666",marginTop:"0.2rem"},children:"Note: For this demo, please manually place images in public folder or use external URLs."})]}),(0,r.jsxs)("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem"},children:[(0,r.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:n,children:n?"Saving...":"Save Product"}),l&&(0,r.jsx)("button",{type:"button",className:"btn btn-outline",onClick:l,children:"Cancel"})]})]})}function l(){let[e,l]=(0,t.useState)([]),[i,o]=(0,t.useState)(null),[n,d]=(0,t.useState)(!1),c=(0,a.useRouter)(),m=async()=>{let e=await fetch("/api/products");e.ok&&l(await e.json())};(0,t.useEffect)(()=>{m()},[]);let p=async e=>{confirm("Are you sure you want to delete this product?")&&(await fetch(`/api/products/${e}`,{method:"DELETE"}),m(),c.refresh())};return(0,r.jsxs)("div",{className:"container",style:{padding:"2rem 1.5rem"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[(0,r.jsx)("h1",{style:{fontSize:"2rem",fontWeight:"bold"},children:"Admin Dashboard"}),(0,r.jsx)("button",{className:"btn btn-primary",onClick:()=>{d(!0),o(null)},disabled:n||!!i,children:"Add New Product"})]}),(n||i)&&(0,r.jsx)("div",{style:{marginBottom:"2rem"},children:(0,r.jsx)(s,{initialData:i||void 0,onSuccess:()=>{d(!1),o(null),m()},onCancel:()=>{d(!1),o(null)}})}),(0,r.jsx)("div",{className:"card",children:(0,r.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{style:{borderBottom:"1px solid var(--border-color)",textAlign:"left",backgroundColor:"var(--surface-color)"},children:[(0,r.jsx)("th",{style:{padding:"1rem"},children:"Image"}),(0,r.jsx)("th",{style:{padding:"1rem"},children:"Name"}),(0,r.jsx)("th",{style:{padding:"1rem"},children:"Category"}),(0,r.jsx)("th",{style:{padding:"1rem"},children:"Price"}),(0,r.jsx)("th",{style:{padding:"1rem"},children:"Actions"})]})}),(0,r.jsx)("tbody",{children:e.map(e=>(0,r.jsxs)("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[(0,r.jsx)("td",{style:{padding:"1rem"},children:e.image?(0,r.jsx)("img",{src:e.image,alt:"",style:{width:"50px",height:"50px",objectFit:"cover",borderRadius:"4px"}}):"-"}),(0,r.jsx)("td",{style:{padding:"1rem",fontWeight:500},children:e.name}),(0,r.jsx)("td",{style:{padding:"1rem",textTransform:"capitalize"},children:e.category}),(0,r.jsxs)("td",{style:{padding:"1rem"},children:["₹",e.price.toLocaleString("en-IN")]}),(0,r.jsxs)("td",{style:{padding:"1rem",display:"flex",gap:"0.5rem"},children:[(0,r.jsx)("button",{className:"btn btn-outline",style:{padding:"0.25rem 0.5rem",fontSize:"0.875rem"},onClick:()=>{o(e),d(!1)},children:"Edit"}),(0,r.jsx)("button",{className:"btn btn-outline",style:{padding:"0.25rem 0.5rem",fontSize:"0.875rem",borderColor:"var(--error-color)",color:"var(--error-color)"},onClick:()=>p(e.id),children:"Delete"})]})]},e.id))})]})})]})}e.s(["default",()=>l],20383)}]);